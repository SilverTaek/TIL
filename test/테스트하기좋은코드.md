향로님의 테스트하기 좋은 코드 블로그 시리즈글에 감명받아서 정리합니다.

- https://jojoldu.tistory.com/674?category=1036934

# 테스트 하기 좋은 코드?

- 몇번을 수행해도 항상 같은 결과가 반환되는 함수

# 테스트 하기 어려운 코드

- 제어할 수 없는 값에 의존하는 경우

- 외부에 영향을 주는 코드

개발을 하다 보면 외부와의 연동이 하는 코드가 많아지는데 이는 테스트하기 어려운 코드가 된다.

즉, async 함수는 도메인 로직에 최대한 거리를 두는 것이 좋다.

도메인 로직과 외부 의존성의 거리가 멀수록 테스트하기 쉽다.

private 메소드/함수가 많다면 공개 인터페이스가 필요할 가능성이 높다

즉, 단일 기능에 private 메소드/함수가 많다면 public 함수 혹은 클래스로 분리하는 것을 고려해보자.

SQL에서 now() 같은 로직을 담고 있으면 테스트 구현과 기능 확장에 취약하다. 따라서 SQL에서는 로직을 담지 말고, 저장소로서의 역할에만 충실하도록 구현하는 것이 테스트하기 좋다.
