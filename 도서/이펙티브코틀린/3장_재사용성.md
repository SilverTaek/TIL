# 3장 재사용성

## Item 19 knowledge를 반복하여 사용하지 말라

"프로젝트에서 이미 있던 코드를 복사해서 붙여넣고 있다면, 무언가가 잘못된 것이다."
* knowledge : 의도적인 정보
* Don't Repeat Yourself(DRY) = WET 안티패턴

### knowledge

프로그래밍에서 knowledge는 넓은 의미로 '의도적인 정보'를 뜻한다.

중요한 2가지 knowledge
* 로직(logic) : 프로그램이 어떠한 식으로 동작하는지와 프로그램이 어떻게 보이는지
* 공통 알고리즘 : 원하는 동작을 하기 위한 알고리즘

### 모든 것은 변화한다

knowledge가 계속해서 변화하는 이유

* 회사가 사용자의 요구 또는 습관을 더 많이 알게 되었다.
* 디자인 표준이 변화했다.
* 플랫폼, 라이브러리, 도구 등이 변화해서 이에 대응해야 한다.

Knowledge 반복의 단점

* 프로젝트의 확장성을 막고, 쉽게 깨지게 만든다.
=>(대안) 하이버네이트와 같은 ORM 익스포즈드와 같은 DAO

### 언제 코드를 반복해도 될까?

knowledge 반복을 줄이면 안 되는 상황도 있다.
ex) 독립적인 2개의 안드로이드 애플리케이션을 만들 때, 빌드 도구 설정이 비슷할 것이므로, 이를 추출해서 knowledge 반복을 줄일 수 있다고 생각할 수 있다.
하지만 두 애플리케이션은 독립적이므로 구성 변경이 일부 필요할 수도 있다. 한 애플리케이션 쪽의 구성만 변경해야 한다면 문제가 된다.


### 단일 책임 원칙

코드를 추출해도 되는지를 확인할 수 있는 원칙
(클래스를 변경하는 이유는 단 한가지여야 한다)

단일 책임 원칙은 2가지 사실을 알려준다.
* 서로 다른 곳에서 사용하는 knowledge는 독립적으로 변경할 가능성이 많다.
* 다른 knowledge는 분리해 두는 것이 좋다. 그렇지 않으면, 재사용해서는 안 되는 부분을 재사용하려는 유혹이 발생할 수 있다.

## Item 20 일반적인 알고리즘을 반복해서 구현하지 말라

이미 있는 것을 활용하면, 단순하게 코드가 짧아진다는 것 이외에도 다양한 장점이 있다.
* 코드 작성 속도가 빨라진다.
* 구현을 따로 읽지 않아도, 함수의 이름 등만 보고도 무엇을 하는지 확실하게 알 수 있다.
* 직업 구현할 때 발생할 수 있는 실수를 줄일 수 있다.
* 제작자들이 한 번만 최적화하면, 이러한 함수를 활용하는 모든 곳이 최적화의 혜택을 받을 수 있다.

### 표준 라이브러리 살펴보기

가장 대표적인 라이브러리 : stdlib
=> 확장 함수를 활용해서 만들어진 굉장히 거대한 유틸리티 라이브러리

## Item 21 일반적인 프로퍼티 패턴은 프로퍼티 위임으로 만들어라
코틀린은 코드 재사용과 관련하여 프로퍼티 위임이라는 새로운 기능을 제공한다.

* 지연 프로퍼티 : lazy 프로퍼티는 이후에 처음 사용하는 요청이 들어올 때 초기화되는 프로퍼티를 의미한다.

코틀린에서 프로퍼티 위임을 사용하면 간단하고 type-safe하게 구현할 수 있다.

코틀린 stdlib의 다음과 같은 프로퍼티 델리게이터를 알아 두면 좋다.

* lazy
* Delegates.observable
* Delegates.vetoable
* Delegates.notNull

## Item 22 일반적인 알고리즘을 구현할 때 제네릭을 사용하라

* 제네릭 함수 : 타입 아규먼트를 사용하는 함수

제네릭은 List<String>, Set<User> 처럼 구체적인 타입으로 컬렉션을 만들 수 있게 클래스와 인터페이스에 도입된 기능이다.
이러한 타입 정보 덕분에 MutableList<Int> 에 안전하게 Int를 추가할 수 있습니다.

### 제네릭 제한
타입 파라미터의 중요한 기능 중 하나는 구체적인 타입의 서브타입만 사용하게 타입을 제한하는 것이다.

## Item 23 타입 파라미터의 섀도잉을 피하라
타입 파라미터 섀도잉을 피해라, 타입 파라미터 섀도잉이 발생한 코드는 이해하기 어려울 수 있다.

## Item 24 제네릭 타입과 variance 한정자를 활용하라
코틀린은 타입 아규먼트의 관계에 제약을 걸 수 있는 굉장히 강력한 제네릭 기능을 제공한다. 이러한 기능으로 제네릭 객체를 연산할 때 굉장히 다양한 지원을 받을 수 있다.

## Item 25 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라

### 풀스택 개발
* 코틀린이 자바스크립트로 컴파일 될 수 있다는 점때문에 웹 백엔드와 프런트엔드를 모두 만들 수 있다.

### 모바일 개발
* 코틀린의 멀티 플랫폼 기능을 활용하면, 로직을 한 번만 구현하고, 두 플랫폼에서 이를 재사용할 수 있다.

### 라이브러리
* 플랫폼에 크게 의존하지 않는다는 점은 공통 모듈을 JVM, 자바스크립트, 네이티브 환경에서 작동하는 모든 언어에서 활용할 수 있다는 의미이다.